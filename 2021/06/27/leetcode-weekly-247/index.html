<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>leetcode-weekly-247 | Hexo</title><script src="https://cdn.bootcss.com/valine/1.4.4/Valine.min.js"></script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.0"></head><body><header><nav><a href="/">Home</a><a href="/archives/">Archives</a></nav></header><main><article><div id="post-bg"><div id="post-title"><h1>leetcode-weekly-247</h1><hr></div><div id="post-content"><p><img src="/2021/06/27/leetcode-weekly-247/rank.png"></p>
<ul>
<li><p>题是倒着做的, 第二题因为一个粗心的bug被卡住了…</p>
</li>
<li><p>没吃早饭做到后面确实状态会不太好</p>
</li>
<li><p>Hard题是树型dp+排列组合, 有一定难度, 还挺有意思的</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/contest/weekly-contest-247/problems/maximum-product-difference-between-two-pairs/"><em>Maximum Product Difference Between Two Pairs</em></a></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">maxProductDifference</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> n = (<span class="hljs-keyword">int</span>)nums.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-built_in">sort</span>(nums.<span class="hljs-built_in">begin</span>(), nums.<span class="hljs-built_in">end</span>());<br>        <span class="hljs-keyword">return</span> nums[n<span class="hljs-number">-1</span>] * nums[n<span class="hljs-number">-2</span>] - nums[<span class="hljs-number">0</span>] * nums[<span class="hljs-number">1</span>];<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://leetcode.com/contest/weekly-contest-247/problems/cyclically-rotating-a-grid/"><em>Cyclically Rotating a Grid</em></a></p>
<ul>
<li><p>拿一个点到四个边界的最短距离可以确定这个点在从外到内的第几圈上</p>
</li>
<li><p>注意数据范围, rotate次数记得对循环长度取模</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">int</span> m, n;<br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">loopLen</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> le = j;<br>        <span class="hljs-keyword">int</span> ri = n - j - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> up = i;<br>        <span class="hljs-keyword">int</span> down = (m - i - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">int</span> Min = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">min</span>(le, ri), <span class="hljs-built_in">min</span>(up, down));<br>        <span class="hljs-keyword">int</span> largest_loop_len = <span class="hljs-number">2</span> * (m + n) - <span class="hljs-number">4</span>;<br>        <span class="hljs-keyword">return</span> largest_loop_len - Min * <span class="hljs-number">8</span>;<br>    &#125;<br>    <span class="hljs-function">pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; <span class="hljs-title">rotateOnce</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i, <span class="hljs-keyword">int</span> j)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> le = j;<br>        <span class="hljs-keyword">int</span> ri = n - j - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">int</span> up = i;<br>        <span class="hljs-keyword">int</span> down = (m - i - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">int</span> Min = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">min</span>(le, ri), <span class="hljs-built_in">min</span>(up, down));<br>        <span class="hljs-keyword">if</span>(Min == le) &#123;<br>            <span class="hljs-keyword">if</span>(le == down) &#123;<br>                <span class="hljs-keyword">return</span> &#123;i, j+<span class="hljs-number">1</span>&#125;;<br>            &#125;<br>            <span class="hljs-keyword">return</span> &#123;i+<span class="hljs-number">1</span>, j&#125;;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(Min == down) &#123;<br>            <span class="hljs-keyword">if</span>(down == ri) &#123;<br>                <span class="hljs-keyword">return</span> &#123;i<span class="hljs-number">-1</span>, j&#125;;<br>            &#125;<br>            <span class="hljs-keyword">return</span> &#123;i, j+<span class="hljs-number">1</span>&#125;;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(Min == ri) &#123;<br>            <span class="hljs-keyword">if</span>(ri == up) &#123;<br>                <span class="hljs-keyword">return</span> &#123;i, j<span class="hljs-number">-1</span>&#125;;<br>            &#125;<br>            <span class="hljs-keyword">return</span> &#123;i<span class="hljs-number">-1</span>, j&#125;;<br>        &#125;<br>        <span class="hljs-keyword">if</span>(Min == up) &#123;<br>            <span class="hljs-keyword">if</span>(up == le) &#123;<br>                <span class="hljs-keyword">return</span> &#123;i+<span class="hljs-number">1</span>, j&#125;;<br>            &#125;<br>            <span class="hljs-keyword">return</span> &#123;i, j<span class="hljs-number">-1</span>&#125;;<br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">-1</span>, <span class="hljs-number">-1</span>&#125;;<br>    &#125;<br>    vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-built_in">rotateGrid</span>(vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt;&amp; grid, <span class="hljs-keyword">int</span> k) &#123;<br>        m = (<span class="hljs-keyword">int</span>)grid.<span class="hljs-built_in">size</span>();<br>        n = (<span class="hljs-keyword">int</span>)grid[<span class="hljs-number">0</span>].<span class="hljs-built_in">size</span>();<br>        vector&lt;vector&lt;<span class="hljs-keyword">int</span>&gt;&gt; <span class="hljs-built_in">ret</span>(m, vector&lt;<span class="hljs-keyword">int</span>&gt; (n, <span class="hljs-number">0</span>));<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i)<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; n; ++j)<br>            &#123;<br>                pair&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; pos&#123;i, j&#125;;<br>                <span class="hljs-keyword">int</span> kkk = k % <span class="hljs-built_in">loopLen</span>(i, j);<br>                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> kk = <span class="hljs-number">0</span>; kk &lt; kkk; ++kk)<br>                    pos = <span class="hljs-built_in">rotateOnce</span>(pos.first, pos.second);<br>                ret[pos.first][pos.second] = grid[i][j];<br>            &#125;        <br>        <span class="hljs-keyword">return</span> ret;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://leetcode.com/contest/weekly-contest-247/problems/number-of-wonderful-substrings/"><em>Number of Wonderful Substrings</em></a></p>
<ul>
<li>状压+二分查找</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-keyword">int</span> prefix[<span class="hljs-number">100010</span>];<br>    vector&lt;<span class="hljs-keyword">int</span>&gt; idxs[<span class="hljs-number">2000</span>];<br>    <span class="hljs-function"><span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> <span class="hljs-title">wonderfulSubstrings</span><span class="hljs-params">(string word)</span> </span>&#123;<br>        <span class="hljs-keyword">int</span> n = (<span class="hljs-keyword">int</span>)word.<span class="hljs-built_in">length</span>();<br>        prefix[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">int</span> mask = <span class="hljs-number">0</span>;<br>        idxs[<span class="hljs-number">0</span>].<span class="hljs-built_in">push_back</span>(<span class="hljs-number">-1</span>);<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">int</span> k = word[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>            mask ^= (<span class="hljs-number">1</span> &lt;&lt; k);<br>            prefix[i+<span class="hljs-number">1</span>] = mask;<br>            idxs[mask].<span class="hljs-built_in">push_back</span>(i);<br>        &#125;<br>        <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">10</span>; ++k) &#123;<br>                <span class="hljs-keyword">int</span> sub_mask = (<span class="hljs-number">1</span> &lt;&lt; k);<br>                <span class="hljs-keyword">int</span> another = prefix[i+<span class="hljs-number">1</span>] ^ sub_mask;<br>                vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; v = idxs[another];<br>                <span class="hljs-keyword">auto</span> iter = <span class="hljs-built_in">lower_bound</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), i);<br>                <span class="hljs-keyword">if</span> (iter != v.<span class="hljs-built_in">end</span>()) &#123;<br>                    ans += (iter - v.<span class="hljs-built_in">begin</span>());<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    ans += (<span class="hljs-keyword">int</span>)v.<span class="hljs-built_in">size</span>();<br>                &#125;<br>            &#125;<br>            vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; v = idxs[prefix[i+<span class="hljs-number">1</span>]];<br>            <span class="hljs-keyword">auto</span> iter = <span class="hljs-built_in">lower_bound</span>(v.<span class="hljs-built_in">begin</span>(), v.<span class="hljs-built_in">end</span>(), i);<br>            <span class="hljs-keyword">if</span> (iter != v.<span class="hljs-built_in">end</span>()) &#123;<br>                ans += (iter - v.<span class="hljs-built_in">begin</span>());<br>            &#125;<span class="hljs-keyword">else</span> &#123;<br>                    ans += (<span class="hljs-keyword">int</span>)v.<span class="hljs-built_in">size</span>();<br>                &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://leetcode.com/contest/weekly-contest-247/problems/count-ways-to-build-rooms-in-an-ant-colony/"><em>Count Ways to Build Rooms in an Ant Colony</em></a></p>
<ul>
<li><p>树形dp+排列组合, 还挺有意思的</p>
</li>
<li><p>发现快速幂和模取逆的板子都记得不太熟悉了…</p>
</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Solution</span> &#123;</span><br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> ll long long</span><br>    <span class="hljs-keyword">const</span> ll mod = (ll)(<span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>);<br>    vector&lt;<span class="hljs-keyword">int</span>&gt; sons[<span class="hljs-number">100010</span>];<br>    ll factorial[<span class="hljs-number">100010</span>];<br>    <span class="hljs-function">ll <span class="hljs-title">qpow</span><span class="hljs-params">(ll x, ll k)</span> </span>&#123;<br>        ll ans = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span>(k != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span>(k &amp; <span class="hljs-number">1</span>) &#123;<br>                ans = (ans * x) % mod;<br>            &#125;<br>            x = (x * x) % mod;<br>            k &gt;&gt;= <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>    <span class="hljs-function">ll <span class="hljs-title">inv</span><span class="hljs-params">(ll x)</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">qpow</span>(x, mod<span class="hljs-number">-2</span>);<br>    &#125;<br>    <span class="hljs-function">pair&lt;ll, ll&gt; <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> u)</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> (sons[u].<span class="hljs-built_in">empty</span>()) &#123;<br>            <span class="hljs-keyword">return</span> &#123;<span class="hljs-number">1</span>, <span class="hljs-number">1</span>&#125;;<br>        &#125;<br>        ll gaps = <span class="hljs-number">1</span>;<br>        ll orders = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> v: sons[u]) &#123;<br>            <span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">dfs</span>(v);<br>            orders = (orders * p.first) % mod;<br>            orders = (orders * factorial[gaps+p.second<span class="hljs-number">-1</span>]) % mod;<br>            orders = (orders * <span class="hljs-built_in">inv</span>(factorial[gaps<span class="hljs-number">-1</span>])) % mod;<br>            orders = (orders * <span class="hljs-built_in">inv</span>(factorial[p.second])) % mod;<br>            gaps += p.second;<br>        &#125;<br>        <span class="hljs-keyword">return</span> &#123;orders, gaps&#125;;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">waysToBuildRooms</span><span class="hljs-params">(vector&lt;<span class="hljs-keyword">int</span>&gt;&amp; prevRoom)</span> </span>&#123;<br>        factorial[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100000</span>; ++i) &#123;<br>            factorial[i] = factorial[i<span class="hljs-number">-1</span>] * i % mod;<br>        &#125;<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; (<span class="hljs-keyword">int</span>)prevRoom.<span class="hljs-built_in">size</span>(); ++i) &#123;<br>            sons[prevRoom[i]].<span class="hljs-built_in">push_back</span>(i);<br>        &#125;<br>        <span class="hljs-keyword">auto</span> p = <span class="hljs-built_in">dfs</span>(<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>)p.first;<br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<div id="paginator"></div></div><div id="post-footer"><hr><a href="/2021/08/03/networking-a-top-down-aproach-chap2/">← Prev networking-a-top-down-aproach-chap2</a><span style="color: #fe2"> | </span><a href="/2021/06/27/leetcode-biweekly-55/">leetcode-biweekly-55 Next →</a><hr></div><div id="bottom-btn"><a id="to-top" href="#post-title" title="to top">∧</a></div><div id="Valine"></div><script>new Valine({
 el: '#Valine'
 , appId: ''
 , appKey: ''
 , placeholder: '此条评论委托企鹅物流发送'
})</script></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/"> Dr.John Doe</a></h1><section id="total"><a id="total-archives" href="/archives"><span class="total-title">Archives Total:</span><span class="total-number">7</span></a><div id="total-tags"><span class="total-title">Tags:</span><span class="total-number">9</span></div><div id="total-categories"><span class="total-title">Categories:</span><span class="total-number">0</span></div></section></div><div id="aside-block"></div><footer><nobr><span class="text-title">©</span><span class="text-content">1970 to 2020</span></nobr><wbr><nobr><span class="text-title">ICP</span><span class="text-content">——备案号——</span></nobr><wbr><wbr><nobr>published with&nbsp;<a target="_blank" rel="noopener" href="http://hexo.io">Hexo&nbsp;</a></nobr><wbr><nobr>Theme&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight&nbsp;</a></nobr><wbr><nobr>by&nbsp;<a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/arknights.js"></script><script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script></body></html>